
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A guide to collaborative work for Imageomics, including GitHub and Hugging Face workflows.">
      
      
        <meta name="author" content="Imageomics Institute">
      
      
        <link rel="canonical" href="https://Imageomics.github.io/Imageomics-guide/wiki-guide/Two-Repo-Problem/">
      
      
        <link rel="prev" href="../When-to-think-about-branch-protections/">
      
      
        <link rel="next" href="../Why-use-the-Institute-GitHub/">
      
      
      <link rel="icon" href="../../logos/Imageomics_logo_butterfly.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>Two Repo Problem - Imageomics Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#two-repo-problem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Imageomics Guide" class="md-header__button md-logo" aria-label="Imageomics Guide" data-md-component="logo">
      
  <img src="../../logos/Imageomics_logo_butterfly.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Imageomics Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Two Repo Problem
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Imageomics/Imageomics-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../GitHub-Repo-Guide/" class="md-tabs__link">
          
  
  GitHub Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Hugging-Face-Repo-Guide/" class="md-tabs__link">
          
  
  Hugging Face Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Metadata-Guide/" class="md-tabs__link">
        
  
    
  
  Metadata Guide

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../HF_DatasetCard_Template_mkdocs/" class="md-tabs__link">
          
  
  Templates

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Command-Line-Cheat-Sheet/" class="md-tabs__link">
        
  
    
  
  Command Line Cheat Sheet

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../CODE_OF_CONDUCT/" class="md-tabs__link">
        
  
    
  
  Code of Conduct

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Glossary-for-Imageomics/" class="md-tabs__link">
          
  
  Other Resources

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Imageomics Guide" class="md-nav__button md-logo" aria-label="Imageomics Guide" data-md-component="logo">
      
  <img src="../../logos/Imageomics_logo_butterfly.png" alt="logo">

    </a>
    Imageomics Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Imageomics/Imageomics-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    GitHub Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            GitHub Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GitHub-Repo-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repo Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../The-GitHub-Workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../The-GitHub-Pull-Request-%28PR%29-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pull Request Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Guide-to-GitHub-Projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projects Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../When-to-think-about-branch-protections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branch Protections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Two Repo Problem
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Two Repo Problem
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="ðŸ“– On This Page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ðŸ“– On This Page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#merging-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Merging Challenges
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-private-from-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      Create private from public repo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create private from public repo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-update-main-branch-of-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      2. Update Main Branch of Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-branch-protections-to-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      3. Add Branch Protections to Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-create-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      4. Create Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-push-initial-changes-from-public-to-private" class="md-nav__link">
    <span class="md-ellipsis">
      5. Push initial changes from public to private
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Push initial changes from public to private">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-clone-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      5a. Clone Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-pull-commits-to-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      5b. Pull Commits to Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-push-commits-to-private-repo-on-github" class="md-nav__link">
    <span class="md-ellipsis">
      5c. Push Commits to Private Repo on GitHub
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-private-to-public" class="md-nav__link">
    <span class="md-ellipsis">
      Merge Private to Public
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Merge Private to Public">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-branch-on-public-with-private-commits" class="md-nav__link">
    <span class="md-ellipsis">
      Create a branch on Public with Private commits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-if-i-already-have-mismatched-repos" class="md-nav__link">
    <span class="md-ellipsis">
      What if I already have mismatched repos?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What if I already have mismatched repos?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resolving-mismatched-publicprivate-repos" class="md-nav__link">
    <span class="md-ellipsis">
      Resolving Mismatched Public/Private Repos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge" class="md-nav__link">
    <span class="md-ellipsis">
      Merge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cherry-pick" class="md-nav__link">
    <span class="md-ellipsis">
      Cherry Pick
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Why-use-the-Institute-GitHub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why Use the Institute GitHub
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hugging Face Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hugging Face Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Hugging-Face-Repo-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repo Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../The-Hugging-Face-Workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../The-Hugging-Face-Dataset-Upload-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset Upload Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Why-use-the-Institute-Hugging-Face/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why Use the Institute Hugging Face
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Metadata-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metadata Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Templates
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HF_DatasetCard_Template_mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset Card Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HF_ModelCard_Template_mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Card Template
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Command-Line-Cheat-Sheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command Line Cheat Sheet
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code of Conduct
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Other Resources
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Other Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Glossary-for-Imageomics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary for Imageomics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Handling-API-Keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handling API Keys
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Helpful-Tools-for-your-Workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helpful Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Technical-Infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Technical Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Virtual-Environments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Environments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="ðŸ“– On This Page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ðŸ“– On This Page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#merging-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Merging Challenges
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-private-from-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      Create private from public repo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create private from public repo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-update-main-branch-of-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      2. Update Main Branch of Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-branch-protections-to-public-repo" class="md-nav__link">
    <span class="md-ellipsis">
      3. Add Branch Protections to Public Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-create-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      4. Create Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-push-initial-changes-from-public-to-private" class="md-nav__link">
    <span class="md-ellipsis">
      5. Push initial changes from public to private
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Push initial changes from public to private">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-clone-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      5a. Clone Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-pull-commits-to-private-repo" class="md-nav__link">
    <span class="md-ellipsis">
      5b. Pull Commits to Private Repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-push-commits-to-private-repo-on-github" class="md-nav__link">
    <span class="md-ellipsis">
      5c. Push Commits to Private Repo on GitHub
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-private-to-public" class="md-nav__link">
    <span class="md-ellipsis">
      Merge Private to Public
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Merge Private to Public">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-branch-on-public-with-private-commits" class="md-nav__link">
    <span class="md-ellipsis">
      Create a branch on Public with Private commits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-if-i-already-have-mismatched-repos" class="md-nav__link">
    <span class="md-ellipsis">
      What if I already have mismatched repos?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What if I already have mismatched repos?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resolving-mismatched-publicprivate-repos" class="md-nav__link">
    <span class="md-ellipsis">
      Resolving Mismatched Public/Private Repos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge" class="md-nav__link">
    <span class="md-ellipsis">
      Merge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cherry-pick" class="md-nav__link">
    <span class="md-ellipsis">
      Cherry Pick
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
    
      
    
    <a href="https://github.com/Imageomics/Imageomics-guide/raw/main/docs/wiki-guide/Two-Repo-Problem.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg>
    </a>
  


<h1 id="two-repo-problem">Two Repo Problem<a class="headerlink" href="#two-repo-problem" title="Permanent link">&para;</a></h1>
<p>When working on a research project often the code is kept private until a paper is published.</p>
<p>In conflict with this is the need to have a public repo for following purposes:</p>
<ul>
<li>Host a website (via a <code>ghpages</code> branch)</li>
<li>Act as a placeholder for when the paper is published</li>
<li>Share code from an earlier paper</li>
</ul>
<p>The typical approach is to have one <strong>public git repo</strong> and one <strong>private git repo</strong>.</p>
<h2 id="merging-challenges">Merging Challenges<a class="headerlink" href="#merging-challenges" title="Permanent link">&para;</a></h2>
<p>Once code changes are complete in the <strong>private git repo</strong> moving them to the <strong>public git repo</strong> can be a problem.
For instance, if the <strong>public git repo</strong> and the <strong>private git repo</strong> were created separately they will have unrelated histories. </p>
<p><strong>Common challenges when merging:</strong></p>
<ul>
<li>Determining the correct git commands and steps to perform the merge</li>
<li>Cleaning up many small commits into one or a few larger commits</li>
<li>Merge conflicts - Files such as the README that may have diverged and result in merge conflicts</li>
<li>Accidentally losing changes or duplicating changes</li>
</ul>
<h2 id="solutions">Solutions<a class="headerlink" href="#solutions" title="Permanent link">&para;</a></h2>
<h3 id="create-private-from-public-repo">Create private from public repo<a class="headerlink" href="#create-private-from-public-repo" title="Permanent link">&para;</a></h3>
<p>To ensure related histories, create the public repo and then create a private repo from it.
The public repo will be created with a README file ensuring it has a commit.
The private repo will be created without any extra files so it will have no commits.</p>
<h4 id="1-create-public-repo">1. Create Public Repo<a class="headerlink" href="#1-create-public-repo" title="Permanent link">&para;</a></h4>
<p>First create a public repo with commits.</p>
<p>Visit https://github.com/organizations/Imageomics/repositories/new</p>
<ul>
<li>Enter the public repo name</li>
<li>Click the checkbox for <code>Add a README file</code></li>
<li>Choose a license</li>
<li>Select an appropriate <code>.gitignore</code> template</li>
<li>Click <code>Create repository</code></li>
</ul>
<p>After this step you should see a repo with commits similar to the following:</p>
<figure>
<p><a class="glightbox" href="../images/two-repo-problem/340342731-d174b21a-0d2d-480d-a7b5-77c7cacf16af.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="New public repository Initial commit indicator" loading="lazy," src="../images/two-repo-problem/340342731-d174b21a-0d2d-480d-a7b5-77c7cacf16af.png" width="600" /></a></p>
<figcaption></figcaption>
</figure>
<h4 id="2-update-main-branch-of-public-repo">2. Update Main Branch of Public Repo<a class="headerlink" href="#2-update-main-branch-of-public-repo" title="Permanent link">&para;</a></h4>
<p>Make changes to the <a href="../GitHub-Repo-Guide/#readme">README</a> and <a href="../GitHub-Repo-Guide/#gitignore"><code>.gitignore</code></a> in the public repo such that no further changes will be needed until the private repo is merged.</p>
<p>After this step you should see a repo with at least 2 commits similar to the following:</p>
<figure>
<p><a class="glightbox" href="../images/two-repo-problem/340343092-84608140-6d1a-4708-8659-bd03e715afb2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="New commits indicator" loading="lazy," src="../images/two-repo-problem/340343092-84608140-6d1a-4708-8659-bd03e715afb2.png" width="600" /></a></p>
<figcaption></figcaption>
</figure>
<h4 id="3-add-branch-protections-to-public-repo">3. Add Branch Protections to Public Repo<a class="headerlink" href="#3-add-branch-protections-to-public-repo" title="Permanent link">&para;</a></h4>
<p>Once your repository is set up, only changes to the <code>ghpages</code> branch are recommended; establish branch protections on both <code>main</code> and <code>ghpages</code> that require review and approval (see <a href="../When-to-think-about-branch-protections/">When to think about branch protections</a> for more information). </p>
<p>There are two issues at play here:</p>
<ol>
<li>There is potential to introduce merge conflicts when bringing in the development repo to merge with the <code>main</code> branch if it has been changed. Hence, it is important that you avoid making changes to the <code>main</code> branch after spin-off.</li>
<li>The <code>ghpages</code> branch will generate the website for the publication. Hence, it is a "published" branch, requiring regular checks with protections like the <code>main</code> branch.</li>
</ol>
<h4 id="4-create-private-repo">4. Create Private Repo<a class="headerlink" href="#4-create-private-repo" title="Permanent link">&para;</a></h4>
<p>First create a private repo <strong>without</strong> commits.</p>
<p>Visit https://github.com/organizations/Imageomics/repositories/new</p>
<ul>
<li>Enter the private repo name (ex: <code>&lt;public-repo&gt;-dev</code>)</li>
<li><strong>DO NOT</strong> check <code>Add a README file</code></li>
<li><strong>DO NOT</strong> Choose a license</li>
<li><strong>DO NOT</strong> select a .gitignore template</li>
<li>Click <code>Create repository</code></li>
</ul>
<p>After this step you should see a repo without any commits with a box similar to the following:</p>
<figure>
<p><a class="glightbox" href="../images/two-repo-problem/340343305-7f0f79f9-956b-4a46-b110-235e2ed4295a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="New private repo after creation" loading="lazy," src="../images/two-repo-problem/340343305-7f0f79f9-956b-4a46-b110-235e2ed4295a.png" width="600" /></a></p>
<figcaption></figcaption>
</figure>
<h4 id="5-push-initial-changes-from-public-to-private">5. Push initial changes from public to private<a class="headerlink" href="#5-push-initial-changes-from-public-to-private" title="Permanent link">&para;</a></h4>
<p>In the following example we will clone the private repo: <code>johnbradley/research-project-x-private</code>.
And pull commits from the public repo: <code>johnbradley/research-project-x</code>.</p>
<h5 id="5a-clone-private-repo">5a. Clone Private Repo<a class="headerlink" href="#5a-clone-private-repo" title="Permanent link">&para;</a></h5>
<div class="language-console highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="go">git clone git@github.com:johnbradley/research-project-x-private.git</span>
</span></code></pre></div>
<p>Output will have a warning similar to the following:
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Cloning into &#39;research-project-x-private&#39;...
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>warning: You appear to have cloned an empty repository.
</span></code></pre></div></p>
<h5 id="5b-pull-commits-to-private-repo">5b. Pull Commits to Private Repo<a class="headerlink" href="#5b-pull-commits-to-private-repo" title="Permanent link">&para;</a></h5>
<p>Switch to the private repo directory.
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">cd research-project-x-private</span>
</span></code></pre></div></p>
<p>Add a new remote repo named <code>upstream</code> that points to the public GitHub repo.
<div class="language-console highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="go">git remote add upstream git@github.com:johnbradley/research-project-x.git</span>
</span></code></pre></div></p>
<p>Pull commits from the public repo.
<div class="language-console highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go">git pull upstream main</span>
</span></code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running <code>git remote -v</code> will confirm where a standard git push (or git pull) will send (or receive) commits from.</p>
</div>
<h5 id="5c-push-commits-to-private-repo-on-github">5c. Push Commits to Private Repo on GitHub<a class="headerlink" href="#5c-push-commits-to-private-repo-on-github" title="Permanent link">&para;</a></h5>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>git push
</span></code></pre></div>
After the above command you should be able to see commits in the private repo similar to the following:</p>
<figure>
<p><a class="glightbox" href="../images/two-repo-problem/340343584-069c445a-487d-432c-8b82-c3867be863ae.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Private repo status after merge" loading="lazy," src="../images/two-repo-problem/340343584-069c445a-487d-432c-8b82-c3867be863ae.png" width="600" /></a></p>
<figcaption></figcaption>
</figure>
<p>Now you're ready to work on development in the private repo following the standard <a href="../The-GitHub-Workflow/">GitHub Workflow</a> with the private repo as your remote.</p>
<h3 id="merge-private-to-public">Merge Private to Public<a class="headerlink" href="#merge-private-to-public" title="Permanent link">&para;</a></h3>
<p>Once your changes are done on the private repo (i.e., when you're ready to make your project public) you can push the changes to the public repo.</p>
<p>For this example the public repo will be at <code>johnbradley/research-project-x</code> and the private will be at <code>johnbradley/research-project-x-private</code>.
A branch named <code>v1</code> will be created on the public repo with changes from the private repo.</p>
<h4 id="create-a-branch-on-public-with-private-commits">Create a branch on Public with Private commits<a class="headerlink" href="#create-a-branch-on-public-with-private-commits" title="Permanent link">&para;</a></h4>
<p>Clone the public repo, cd into the directory.
<div class="language-console highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="go">git clone git@github.com:johnbradley/research-project-x.git</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="go">cd research-project-x</span>
</span></code></pre></div></p>
<p>Ensure we are on the main branch and up to date with GitHub:
<div class="language-console highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="go">git checkout main</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="go">git pull</span>
</span></code></pre></div></p>
<p>Create a branch named <code>v1</code>. Checkout the branch.
This branch will hold the private repo changes.
<div class="language-console highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">git branch v1</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="go">git checkout v1</span>
</span></code></pre></div></p>
<p>Add an upstream remote pointing at the private repo.
<div class="language-console highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="go">git remote add upstream git@github.com:johnbradley/research-project-x-private.git</span>
</span></code></pre></div></p>
<p>Pull main branch changes from private repo into <code>v1</code> branch.
<div class="language-console highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="go">git pull upstream main</span>
</span></code></pre></div></p>
<p>At this point you could rebase the commits to reduce them to meaningful commits. However, keep in mind that this would result in different commit histories on the public and private repos after pushing <code>v1</code>, which may impact the ability to use this strategy for a <code>v2</code>. It would be preferable to use this strategy in <a href="../The-GitHub-Workflow/#9-open-a-pull-request">pull requests (PRs)</a> during development.</p>
<p>Push <code>v1</code> branch to the public repo.
<div class="language-console highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="go">git push --set-upstream origin v1</span>
</span></code></pre></div></p>
<h4 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h4>
<p>At this point the main branch of the public repo should match the main branch of the private repo.
Additional changes should be made only to the private repo, preferably using a branch.
See <a href="../The-GitHub-Workflow/">Github-Workflow</a> for more details.
When you are ready to release a new version of the code in the private repo follow the <a href="#merge-private-to-public">Merge Private to Public instructions</a> again using a new version branch name (eg. <code>v2</code>).</p>
<Hr>

<h2 id="what-if-i-already-have-mismatched-repos"><em>What if I already have mismatched repos?</em><a class="headerlink" href="#what-if-i-already-have-mismatched-repos" title="Permanent link">&para;</a></h2>
<p>If you find yourself with two repositories that have misaligned histories, please read the following and reach out to the Imageomics Informatics Team so we can help.</p>
<h3 id="resolving-mismatched-publicprivate-repos">Resolving Mismatched Public/Private Repos<a class="headerlink" href="#resolving-mismatched-publicprivate-repos" title="Permanent link">&para;</a></h3>
<p>If you already have a public and private repo with unrelated histories resolving this can be challenging.</p>
<p>Three approaches to resolve merging disparate public/private repos are documented here.</p>
<ul>
<li>Merge - use when the public and private repos contain only unrelated commits.</li>
<li>Reset - use when all public repo commits can be deleted and replaced with private repo commits.</li>
<li>Cherry Pick - use when the same commits exist in both repos with different hashes.</li>
</ul>
<h3 id="merge">Merge<a class="headerlink" href="#merge" title="Permanent link">&para;</a></h3>
<p>Merge commits from the <code>main</code> branch of the private repo into the <code>main</code> branch of the public repo.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the repos have commits in common with different hashes this will result in merge conflicts and duplicated commits.</p>
</div>
<p>Merge the main branch of the private repo with the main branch of the public repo.
As far as maintaining history this is the safest approach. Often this approach results in merge conflicts.
Merging conflicts can take time to manually resolve and is challenging to learn.
The allow unrelated histories flag is necessary for this approach:
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>git merge --allow-unrelated-histories ...
</span></code></pre></div></p>
<h3 id="reset">Reset<a class="headerlink" href="#reset" title="Permanent link">&para;</a></h3>
<p>Replace all commits on the <code>main</code> branch of the public rep with commits from the <code>main</code> branch of the private repo.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This will destroy all history in the public repo main branch!</p>
</div>
<p>This option is only safe to do when releasing the first version of a version on the public repo.
After setting up the remote for upstream run a command similar to the following:
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>git reset --hard upstream/main
</span></code></pre></div></p>
<h3 id="cherry-pick">Cherry Pick<a class="headerlink" href="#cherry-pick" title="Permanent link">&para;</a></h3>
<p>This method is used when the same commits exist in both repos with different hashes.
This requires finding which commits are in the private repo but not in the public repo.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the commits you cherry-pick have commits in common with different hashes this will result in merge conflicts and duplicated commits.</p>
</div>
<p>After fetching your upstream branch you can cherry pick a range of commits to add like so:
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>git cherry-pick &lt;start-commit-hash&gt;..&lt;end-commit-hash&gt;
</span></code></pre></div></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../When-to-think-about-branch-protections/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Branch Protections">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Branch Protections
              </div>
            </div>
          </a>
        
        
          
          <a href="../Why-use-the-Institute-GitHub/" class="md-footer__link md-footer__link--next" aria-label="Next: Why Use the Institute GitHub">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Why Use the Institute GitHub
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.view", "content.code.copy", "navigation.footer", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>